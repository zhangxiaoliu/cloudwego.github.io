<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.85.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Retry | CloudWeGo</title><meta name=description content="A leading practice for building enterprise cloud native middleware!"><meta property="og:title" content="Retry"><meta property="og:description" content="Kitex Exception retry and Backup Request policy Introduction and Usage Guide."><meta property="og:type" content="article"><meta property="og:url" content="https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/retry/"><meta property="article:section" content="docs"><meta property="article:published_time" content="2022-08-25T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-11T13:43:08+08:00"><meta property="og:site_name" content="CloudWeGo"><meta itemprop=name content="Retry"><meta itemprop=description content="Kitex Exception retry and Backup Request policy Introduction and Usage Guide."><meta itemprop=datePublished content="2022-08-25T00:00:00+00:00"><meta itemprop=dateModified content="2023-04-11T13:43:08+08:00"><meta itemprop=wordCount content="1814"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Retry"><meta name=twitter:description content="Kitex Exception retry and Backup Request policy Introduction and Usage Guide."><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-QYWRQRLPRM')</script><script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?f1808c42af827f368aa7eca3baae6d55",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script><link rel=preload href=/scss/main.min.8090891c264e3fa6623cbdac7ce42c1259703e8068886edd79eb5ec5f88cd0c9.css as=style><link href=/scss/main.min.8090891c264e3fa6623cbdac7ce42c1259703e8068886edd79eb5ec5f88cd0c9.css rel=stylesheet integrity><script src=https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-QYWRQRLPRM','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand-xl navbar-dark td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img src=/img/logo.png></span></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0 ml-auto"><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Documentation</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/kitex/>Kitex</a>
<a class=dropdown-item href=/docs/hertz/>Hertz</a>
<a class=dropdown-item href=/docs/volo/>Volo</a>
<a class=dropdown-item href=/docs/netpoll/>Netpoll</a>
<a class=dropdown-item href=/docs/cwgo/>Cwgo</a>
<a class=dropdown-item href=/docs/motore/>Motore</a>
<a class=dropdown-item href=/docs/pilota/>Pilota</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cooperation/><span>Cooperation</span></a></li><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Security</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/security/safety-bulletin/>safety-bulletin</a>
<a class=dropdown-item href=/security/vulnerability-reporting/>vulnerability-reporting</a></div></li><li class="nav-item dropdown mr-4"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/kitex/tutorials/basic-feature/retry/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.ffbc4e552f7e4427acd2c28307a2610a.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.ffbc4e552f7e4427acd2c28307a2610a.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/kitex/tutorials/basic-feature/retry/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitex-li><input type=checkbox id=m-docskitex-check checked>
<label for=m-docskitex-check><a href=/docs/kitex/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitex><span>Kitex</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexoverview-li><input type=checkbox id=m-docskitexoverview-check checked>
<label for=m-docskitexoverview-check><a href=/docs/kitex/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexoverview><span>Overview</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexgetting-started-li><input type=checkbox id=m-docskitexgetting-started-check checked>
<label for=m-docskitexgetting-started-check><a href=/docs/kitex/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexgetting-started><span>Getting Started</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitextutorials-li><input type=checkbox id=m-docskitextutorials-check checked>
<label for=m-docskitextutorials-check><a href=/docs/kitex/tutorials/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorials><span>Tutorials</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitextutorialsbasic-feature-li><input type=checkbox id=m-docskitextutorialsbasic-feature-check checked>
<label for=m-docskitextutorialsbasic-feature-check><a href=/docs/kitex/tutorials/basic-feature/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsbasic-feature><span>Basic Feature</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuremessage_type-li><input type=checkbox id=m-docskitextutorialsbasic-featuremessage_type-check>
<label for=m-docskitextutorialsbasic-featuremessage_type-check><a href=/docs/kitex/tutorials/basic-feature/message_type/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuremessage_type><span>Message Types</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureserialization_protocol-li><input type=checkbox id=m-docskitextutorialsbasic-featureserialization_protocol-check>
<label for=m-docskitextutorialsbasic-featureserialization_protocol-check><a href=/docs/kitex/tutorials/basic-feature/serialization_protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureserialization_protocol><span>Serialization Protocol</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuretransport_protocol-li><input type=checkbox id=m-docskitextutorialsbasic-featuretransport_protocol-check>
<label for=m-docskitextutorialsbasic-featuretransport_protocol-check><a href=/docs/kitex/tutorials/basic-feature/transport_protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuretransport_protocol><span>Transport Protocol</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurevisit_directly-li><input type=checkbox id=m-docskitextutorialsbasic-featurevisit_directly-check>
<label for=m-docskitextutorialsbasic-featurevisit_directly-check><a href=/docs/kitex/tutorials/basic-feature/visit_directly/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurevisit_directly><span>Visit Directly</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureconnection_type-li><input type=checkbox id=m-docskitextutorialsbasic-featureconnection_type-check>
<label for=m-docskitextutorialsbasic-featureconnection_type-check><a href=/docs/kitex/tutorials/basic-feature/connection_type/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureconnection_type><span>Connection Type</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuretimeout-li><input type=checkbox id=m-docskitextutorialsbasic-featuretimeout-check>
<label for=m-docskitextutorialsbasic-featuretimeout-check><a href=/docs/kitex/tutorials/basic-feature/timeout/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuretimeout><span>Timeouts</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docskitextutorialsbasic-featureretry-li><input type=checkbox id=m-docskitextutorialsbasic-featureretry-check checked>
<label for=m-docskitextutorialsbasic-featureretry-check><a href=/docs/kitex/tutorials/basic-feature/retry/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureretry><span class=td-sidebar-nav-active-item>Retry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureloadbalance-li><input type=checkbox id=m-docskitextutorialsbasic-featureloadbalance-check>
<label for=m-docskitextutorialsbasic-featureloadbalance-check><a href=/docs/kitex/tutorials/basic-feature/loadbalance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureloadbalance><span>LoadBalancer</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurecircuitbreaker-li><input type=checkbox id=m-docskitextutorialsbasic-featurecircuitbreaker-check>
<label for=m-docskitextutorialsbasic-featurecircuitbreaker-check><a href=/docs/kitex/tutorials/basic-feature/circuitbreaker/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurecircuitbreaker><span>Circuit Breaker</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurelimiting-li><input type=checkbox id=m-docskitextutorialsbasic-featurelimiting-check>
<label for=m-docskitextutorialsbasic-featurelimiting-check><a href=/docs/kitex/tutorials/basic-feature/limiting/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurelimiting><span>Rate Limiting</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurefallback-li><input type=checkbox id=m-docskitextutorialsbasic-featurefallback-check>
<label for=m-docskitextutorialsbasic-featurefallback-check><a href=/docs/kitex/tutorials/basic-feature/fallback/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurefallback><span>Fallback</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuretracing-li><input type=checkbox id=m-docskitextutorialsbasic-featuretracing-check>
<label for=m-docskitextutorialsbasic-featuretracing-check><a href=/docs/kitex/tutorials/basic-feature/tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuretracing><span>Instrumentation Control</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurelogging-li><input type=checkbox id=m-docskitextutorialsbasic-featurelogging-check>
<label for=m-docskitextutorialsbasic-featurelogging-check><a href=/docs/kitex/tutorials/basic-feature/logging/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurelogging><span>Logging</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurebizstatuserr-li><input type=checkbox id=m-docskitextutorialsbasic-featurebizstatuserr-check>
<label for=m-docskitextutorialsbasic-featurebizstatuserr-check><a href=/docs/kitex/tutorials/basic-feature/bizstatuserr/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurebizstatuserr><span>Business Exception</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsservice-governance-li><input type=checkbox id=m-docskitextutorialsservice-governance-check>
<label for=m-docskitextutorialsservice-governance-check><a href=/docs/kitex/tutorials/service-governance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsservice-governance><span>Service Governance</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancediscovery-li><input type=checkbox id=m-docskitextutorialsservice-governancediscovery-check>
<label for=m-docskitextutorialsservice-governancediscovery-check><a href=/docs/kitex/tutorials/service-governance/discovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancediscovery><span>Service Discovery</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancemonitoring-li><input type=checkbox id=m-docskitextutorialsservice-governancemonitoring-check>
<label for=m-docskitextutorialsservice-governancemonitoring-check><a href=/docs/kitex/tutorials/service-governance/monitoring/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancemonitoring><span>Monitoring</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancetracing-li><input type=checkbox id=m-docskitextutorialsservice-governancetracing-check>
<label for=m-docskitextutorialsservice-governancetracing-check><a href=/docs/kitex/tutorials/service-governance/tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancetracing><span>Tracing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governanceaccess_control-li><input type=checkbox id=m-docskitextutorialsservice-governanceaccess_control-check>
<label for=m-docskitextutorialsservice-governanceaccess_control-check><a href=/docs/kitex/tutorials/service-governance/access_control/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governanceaccess_control><span>Customized Access Control</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsadvanced-feature-li><input type=checkbox id=m-docskitextutorialsadvanced-feature-check>
<label for=m-docskitextutorialsadvanced-feature-check><a href=/docs/kitex/tutorials/advanced-feature/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsadvanced-feature><span>Advanced Feature</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsadvanced-featuregeneric-call-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregeneric-call-check>
<label for=m-docskitextutorialsadvanced-featuregeneric-call-check><a href=/docs/kitex/tutorials/advanced-feature/generic-call/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsadvanced-featuregeneric-call><span>Generic Call</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards-check>
<label for=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards-check><a href=/docs/kitex/tutorials/advanced-feature/generic-call/thrift_idl_annotation_standards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards><span>IDL Definition Specification for Mapping between Thrift and HTTP</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuremetainfo-li><input type=checkbox id=m-docskitextutorialsadvanced-featuremetainfo-check>
<label for=m-docskitextutorialsadvanced-featuremetainfo-check><a href=/docs/kitex/tutorials/advanced-feature/metainfo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuremetainfo><span>Metainfo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featureinvoker-li><input type=checkbox id=m-docskitextutorialsadvanced-featureinvoker-check>
<label for=m-docskitextutorialsadvanced-featureinvoker-check><a href=/docs/kitex/tutorials/advanced-feature/invoker/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featureinvoker><span>Server SDK Mode</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featureerror_handler-li><input type=checkbox id=m-docskitextutorialsadvanced-featureerror_handler-check>
<label for=m-docskitextutorialsadvanced-featureerror_handler-check><a href=/docs/kitex/tutorials/advanced-feature/error_handler/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featureerror_handler><span>Customize Error Handler</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurestart_shutdown_hook-li><input type=checkbox id=m-docskitextutorialsadvanced-featurestart_shutdown_hook-check>
<label for=m-docskitextutorialsadvanced-featurestart_shutdown_hook-check><a href=/docs/kitex/tutorials/advanced-feature/start_shutdown_hook/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurestart_shutdown_hook><span>Customize Hook for Start/Shutdown of Server-side</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuregrpcproxy-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregrpcproxy-check>
<label for=m-docskitextutorialsadvanced-featuregrpcproxy-check><a href=/docs/kitex/tutorials/advanced-feature/grpcproxy/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregrpcproxy><span>gRPC Proxy</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurecodec_frugal-li><input type=checkbox id=m-docskitextutorialsadvanced-featurecodec_frugal-check>
<label for=m-docskitextutorialsadvanced-featurecodec_frugal-check><a href=/docs/kitex/tutorials/advanced-feature/codec_frugal/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurecodec_frugal><span>Frugal</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurexds-li><input type=checkbox id=m-docskitextutorialsadvanced-featurexds-check>
<label for=m-docskitextutorialsadvanced-featurexds-check><a href=/docs/kitex/tutorials/advanced-feature/xds/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurexds><span>xDS Support</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featureprofiler-li><input type=checkbox id=m-docskitextutorialsadvanced-featureprofiler-check>
<label for=m-docskitextutorialsadvanced-featureprofiler-check><a href=/docs/kitex/tutorials/advanced-feature/profiler/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featureprofiler><span>Request Profiler</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialscode-gen-li><input type=checkbox id=m-docskitextutorialscode-gen-check>
<label for=m-docskitextutorialscode-gen-check><a href=/docs/kitex/tutorials/code-gen/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialscode-gen><span>Code Generation</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gencode_generation-li><input type=checkbox id=m-docskitextutorialscode-gencode_generation-check>
<label for=m-docskitextutorialscode-gencode_generation-check><a href=/docs/kitex/tutorials/code-gen/code_generation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencode_generation><span>Code Generation Tool</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gencombine_service-li><input type=checkbox id=m-docskitextutorialscode-gencombine_service-check>
<label for=m-docskitextutorialscode-gencombine_service-check><a href=/docs/kitex/tutorials/code-gen/combine_service/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencombine_service><span>Combine Service</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genvalidator-li><input type=checkbox id=m-docskitextutorialscode-genvalidator-check>
<label for=m-docskitextutorialscode-genvalidator-check><a href=/docs/kitex/tutorials/code-gen/validator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genvalidator><span>Thrift Validator</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genfastpb-li><input type=checkbox id=m-docskitextutorialscode-genfastpb-check>
<label for=m-docskitextutorialscode-genfastpb-check><a href=/docs/kitex/tutorials/code-gen/fastpb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genfastpb><span>Fastpb</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gentemplate_extension-li><input type=checkbox id=m-docskitextutorialscode-gentemplate_extension-check>
<label for=m-docskitextutorialscode-gentemplate_extension-check><a href=/docs/kitex/tutorials/code-gen/template_extension/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gentemplate_extension><span>Extend the Templates of Service Generated Code</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genstruct_reference_generator-li><input type=checkbox id=m-docskitextutorialscode-genstruct_reference_generator-check>
<label for=m-docskitextutorialscode-genstruct_reference_generator-check><a href=/docs/kitex/tutorials/code-gen/struct_reference_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genstruct_reference_generator><span>Generate Structs Reference</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gencustom_tpl-li><input type=checkbox id=m-docskitextutorialscode-gencustom_tpl-check>
<label for=m-docskitextutorialscode-gencustom_tpl-check><a href=/docs/kitex/tutorials/code-gen/custom_tpl/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencustom_tpl><span>Custom Scaffold Template</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsframework-exten-li><input type=checkbox id=m-docskitextutorialsframework-exten-check>
<label for=m-docskitextutorialsframework-exten-check><a href=/docs/kitex/tutorials/framework-exten/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsframework-exten><span>Framework Extension</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenmiddleware-li><input type=checkbox id=m-docskitextutorialsframework-extenmiddleware-check>
<label for=m-docskitextutorialsframework-extenmiddleware-check><a href=/docs/kitex/tutorials/framework-exten/middleware/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenmiddleware><span>Middleware Extensions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extensuite-li><input type=checkbox id=m-docskitextutorialsframework-extensuite-check>
<label for=m-docskitextutorialsframework-extensuite-check><a href=/docs/kitex/tutorials/framework-exten/suite/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extensuite><span>Suite Extensions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenregistry-li><input type=checkbox id=m-docskitextutorialsframework-extenregistry-check>
<label for=m-docskitextutorialsframework-extenregistry-check><a href=/docs/kitex/tutorials/framework-exten/registry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenregistry><span>Extension of Service Registry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenservice_discovery-li><input type=checkbox id=m-docskitextutorialsframework-extenservice_discovery-check>
<label for=m-docskitextutorialsframework-extenservice_discovery-check><a href=/docs/kitex/tutorials/framework-exten/service_discovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenservice_discovery><span>Service Discovery Extension</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenloadbalance-li><input type=checkbox id=m-docskitextutorialsframework-extenloadbalance-check>
<label for=m-docskitextutorialsframework-extenloadbalance-check><a href=/docs/kitex/tutorials/framework-exten/loadbalance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenloadbalance><span>Customize LoadBalancer</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenmonitoring-li><input type=checkbox id=m-docskitextutorialsframework-extenmonitoring-check>
<label for=m-docskitextutorialsframework-extenmonitoring-check><a href=/docs/kitex/tutorials/framework-exten/monitoring/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenmonitoring><span>Monitoring Extension</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extencodec-li><input type=checkbox id=m-docskitextutorialsframework-extencodec-check>
<label for=m-docskitextutorialsframework-extencodec-check><a href=/docs/kitex/tutorials/framework-exten/codec/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extencodec><span>Extension of Codec</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentransport-li><input type=checkbox id=m-docskitextutorialsframework-extentransport-check>
<label for=m-docskitextutorialsframework-extentransport-check><a href=/docs/kitex/tutorials/framework-exten/transport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentransport><span>Extension of Transport Module</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentransmeta-li><input type=checkbox id=m-docskitextutorialsframework-extentransmeta-check>
<label for=m-docskitextutorialsframework-extentransmeta-check><a href=/docs/kitex/tutorials/framework-exten/transmeta/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentransmeta><span>Extension of Metadata Transparent Transmission</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentrans_pipeline-li><input type=checkbox id=m-docskitextutorialsframework-extentrans_pipeline-check>
<label for=m-docskitextutorialsframework-extentrans_pipeline-check><a href=/docs/kitex/tutorials/framework-exten/trans_pipeline/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentrans_pipeline><span>Extension of Transport Pipeline-Bound</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extendiagnosis-li><input type=checkbox id=m-docskitextutorialsframework-extendiagnosis-check>
<label for=m-docskitextutorialsframework-extendiagnosis-check><a href=/docs/kitex/tutorials/framework-exten/diagnosis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extendiagnosis><span>Extension of Diagnosis</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsoptions-li><input type=checkbox id=m-docskitextutorialsoptions-check>
<label for=m-docskitextutorialsoptions-check><a href=/docs/kitex/tutorials/options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsoptions><span>Option</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsoptionsclient_options-li><input type=checkbox id=m-docskitextutorialsoptionsclient_options-check>
<label for=m-docskitextutorialsoptionsclient_options-check><a href=/docs/kitex/tutorials/options/client_options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionsclient_options><span>Client Option</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsoptionsserver_options-li><input type=checkbox id=m-docskitextutorialsoptionsserver_options-check>
<label for=m-docskitextutorialsoptionsserver_options-check><a href=/docs/kitex/tutorials/options/server_options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionsserver_options><span>Server Option</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsoptionscall_options-li><input type=checkbox id=m-docskitextutorialsoptionscall_options-check>
<label for=m-docskitextutorialsoptionscall_options-check><a href=/docs/kitex/tutorials/options/call_options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionscall_options><span>Call Option</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitexreference-li><input type=checkbox id=m-docskitexreference-check checked>
<label for=m-docskitexreference-check><a href=/docs/kitex/reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexreference><span>Reference</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferencetransport_protocol_ttheader-li><input type=checkbox id=m-docskitexreferencetransport_protocol_ttheader-check>
<label for=m-docskitexreferencetransport_protocol_ttheader-check><a href=/docs/kitex/reference/transport_protocol_ttheader/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferencetransport_protocol_ttheader><span>TTHeader</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferenceexception-li><input type=checkbox id=m-docskitexreferenceexception-check>
<label for=m-docskitexreferenceexception-check><a href=/docs/kitex/reference/exception/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferenceexception><span>Exception Instruction</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferenceversion-li><input type=checkbox id=m-docskitexreferenceversion-check>
<label for=m-docskitexreferenceversion-check><a href=/docs/kitex/reference/version/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferenceversion><span>Version Specification</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexfaq-li><input type=checkbox id=m-docskitexfaq-check checked>
<label for=m-docskitexfaq-check><a href=/docs/kitex/faq/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexfaq><span>FAQ</span></a></label></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cloudwego/cloudwego.github.io/edit/main/content/en/docs/kitex/Tutorials/basic-feature/retry.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/new/main/content/en/docs/kitex/Tutorials/basic-feature/retry.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/issues/new?title=Retry" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cloudwego/kitex/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#attention>Attention</a></li></ul></li><li><a href=#retry-policy>Retry Policy</a></li><li><a href=#how-to-use>How to use</a><ul><li><a href=#enable-by-code-configuration>Enable by Code Configuration</a></li><li><a href=#circuit-breaker-reuse>Circuit Breaker Reuse</a></li><li><a href=#dynamic-open-or-adjust-strategy>Dynamic open or adjust strategy</a></li></ul></li><li><a href=#tracking>Tracking</a></li><li><a href=#downstream-identification>Downstream identification</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/kitex/>Kitex</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/kitex/tutorials/>Tutorials</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/>Basic Feature</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://www.cloudwego.io/docs/kitex/tutorials/basic-feature/retry/>Retry</a></li></ol></nav><div class=td-content><h1>Retry</h1><div class=lead>Kitex Exception retry and Backup Request policy Introduction and Usage Guide.</div><header class=article-meta></header><h2 id=introduction>Introduction</h2><p>There are currently three types of retries: <code>Exception Retry</code>, <code>Backup Request</code> and <code>Connection Failed Retry</code>. Among them, <code>Connection Failed Retry</code> is a network-level problem, since the request is not sent, the framework will retry by default. Here we only present the use of the first two types of retries:</p><ul><li><code>Exception Retry</code>: Improve the overall success rate of the service.</li><li><code>Backup Request</code>: Reduce delay jitter of request.</li></ul><p>Because many requests are not idempotent, these two types of retries are not used as the default policy.</p><h3 id=attention>Attention</h3><ul><li>Confirm that your service is <strong>idempotent</strong> before enable retry.</li><li><code>Exception Retry</code> will increase overall latency.</li></ul><h2 id=retry-policy>Retry Policy</h2><p>Only one of the <code>Exception Retry</code> and <code>Backup Request</code> policies can be configured at method granularity.</p><ul><li><code>Exception Retry</code></li></ul><p>The default is for timeout retry only, and it can be configured to support specific exception or Resp retry.</p><table><thead><tr><th>Configuration Item</th><th>Default value</th><th>Description</th><th>Limit</th></tr></thead><tbody><tr><td><code>MaxRetryTimes</code></td><td>2</td><td>The first request is not included. If it is configured as 0, it means to stop retrying.</td><td>Value: [0-5]</td></tr><tr><td><code>MaxDurationMS</code></td><td>0</td><td>Including the time-consuming of the first failed request and the retry request. If the limit is reached, the subsequent retry will be stopped. 0 means unlimited. Note: if configured, the configuration item must be greater than the request timeout.</td><td></td></tr><tr><td><code>EERThreshold</code></td><td>10%</td><td>If the method-level request error rate exceeds the threshold, retry stops.</td><td>Value: (0-30%]</td></tr><tr><td><code>ChainStop</code></td><td>-</td><td><code>Chain Stop</code> is enabled by default. If the upstream request is a retry request, it will not be retried.</td><td>>= v0.0.5 as the default policy.</td></tr><tr><td><code>DDLStop</code></td><td>false</td><td>If the timeout period of overall request chain is reached, the retry request won&rsquo;t be sent with this policy. Notice, Kitex doesn&rsquo;t provide build-in implementation, use <code>retry.RegisterDDLStop(ddlStopFunc)</code> to register is needed.</td><td></td></tr><tr><td><code>BackOff</code></td><td>None</td><td>Retry waiting strategy, <code>NoneBackOff</code> by default. Optional: <code>FixedBackOff</code>, <code>RandomBackOff</code>.</td><td></td></tr><tr><td><code>RetrySameNode</code></td><td>false</td><td>By default, Kitex selects another node to retry. If you want to retry on the same node, set this parameter to true.</td><td></td></tr></tbody></table><ul><li><code>Backup Request</code></li></ul><table><thead><tr><th>Configuration Item</th><th>Default value</th><th>Description</th><th>Limit</th></tr></thead><tbody><tr><td><code>RetryDelayMS</code></td><td>-</td><td>Duration of waiting for initiating a Backup Requset when the first request is not returned. This parameter must be set manually. It is suggested to set as TP99.</td><td></td></tr><tr><td><code>MaxRetryTimes</code></td><td>1</td><td>The first request is not included. If it is configured as 0, it means to stop retrying.</td><td>Value: [0-2]</td></tr><tr><td><code>EERThreshold</code></td><td>10%</td><td>If the method-level request error rate exceeds the threshold, retry stops.</td><td>Value: (0-30%]</td></tr><tr><td><code>ChainStop</code></td><td>false</td><td><code>Chain Stop</code> is enabled by default. If the upstream request is a retry request, it will not be retried after timeout.</td><td>>= v0.0.5 as the default policy.</td></tr><tr><td><code>RetrySameNode</code></td><td>false</td><td>By default, Kitex selects another node to retry. If you want to retry on the same node, set this parameter to true.</td><td></td></tr></tbody></table><h2 id=how-to-use>How to use</h2><h3 id=enable-by-code-configuration>Enable by Code Configuration</h3><p>Note: Dynamic configuration (see 3.3) cannot take effect if retry is enabled by code configuration.</p><h4 id=exception-retry-configuration>Exception Retry Configuration</h4><ul><li>Configuration e.g.</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// import &#34;github.com/cloudwego/kitex/pkg/retry&#34;
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>fp</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewFailurePolicy</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>fp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithMaxRetryTimes</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// set the maximum number of retries to 3
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>xxxCli</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>xxxservice</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;destServiceName&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithFailureRetry</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fp</span><span style=color:#000;font-weight:700>))</span>
</code></pre></div><ul><li>Strategy selection:</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#000>fp</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewFailurePolicy</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#8f5902;font-style:italic>// Number of retries. The default value is 2, excluding the first request.
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>fp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithMaxRetryTimes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>xxx</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic>// Total time consuming. Including the time-consuming for the first failed request and retry request. If the duration limit is reached, the subsequent retries are stopped.
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>fp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithMaxDurationMS</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>xxx</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic>// Disable `Chain Stop`
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>fp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DisableChainRetryStop</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#8f5902;font-style:italic>// Enable DDL abort
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>fp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithDDLStop</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#8f5902;font-style:italic>// Backoff policy. No backoff strategy by default.
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>fp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithFixedBackOff</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fixMS</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// Fixed backoff
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>fp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRandomBackOff</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>minMS</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>maxMS</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// Random backoff
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#8f5902;font-style:italic>// Set errRate for retry circuit breaker
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>fp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRetryBreaker</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>errRate</span> <span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic>// Retry on the same node
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>fp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRetrySameNode</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div><h5 id=retry-with-specific-resultexceptionresp>Retry with Specific Result（Exception/Resp）</h5><p>v0.4.0 is supported.</p><p>It can be configured to support specific result to retry, and the result can be request failure or Resp. Because the business may set status information in Resp, and return retry for a certain type. This is collectively referred to as exception retry.</p><ul><li>Configuration e.g.</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// import &#34;github.com/cloudwego/kitex/pkg/retry&#34;
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span>
<span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithSpecifiedResultRetry</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>yourResultRetry</span><span style=color:#000;font-weight:700>))</span>

<span style=color:#000>xxxCli</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>xxxservice</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>targetService</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><ul><li>retry.ShouldResultRetry Definition</li></ul><p>In order to judge error and resp at specific method granularity, rpcinfo is provided as an input argument. The method can be obtained through <code>ri.To().Method()</code>.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// ShouldResultRetryit is used for specifying which error or resp need to be retried
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>ShouldResultRetry</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
   <span style=color:#000>ErrorRetry</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ri</span> <span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RPCInfo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>bool</span>
   <span style=color:#000>RespRetry</span>  <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>resp</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{},</span> <span style=color:#000>ri</span> <span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RPCInfo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>bool</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><ul><li><p>Specific Exception/Resp Implementation e.g.</p><ul><li><p>Resp:</p><p>Resp of Thrift and KitexProtobuf protocol correspond to *XXXResult in the generated code, not the real business Resp. To get the real Resp, you need to assert <code>interface{ GetResult() interface{} }</code>.</p></li><li><p>Error:</p><p>The error returned by the peer, kitex will be uniformly encapsulated as <code>kerrors.ErrRemoteOrNetwork</code>. For Thrift and KitexProtobuf, the following examples can get the Error Msg returned by the peer. For gRPC, if the peer returns an error constructed by <code>status.Error</code>, and the local can use <code>status.FromError(err)</code> to get <code>*status.Status</code>. Pay attention to <code>Status</code> needs to be provided by Kitex, and the package path is <code>github.com/cloudwego/kitex/pkg/remote/trans/nphttp2/status</code>.</p></li></ul></li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// retry with specify Resp for one method
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>respRetry</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>resp</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{},</span> <span style=color:#000>ri</span> <span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RPCInfo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000;font-weight:700>{</span>
   <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>ri</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>To</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>Method</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;mock&#34;</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#8f5902;font-style:italic>// Notice: you should test with your code, this is only a demo, thrift gen-code of Kitex has GetResult() interface{}
</span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>respI</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ok1</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>resp</span><span style=color:#000;font-weight:700>.(</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{</span> <span style=color:#000>GetResult</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}</span> <span style=color:#000;font-weight:700>});</span> <span style=color:#000>ok1</span> <span style=color:#000;font-weight:700>{</span>
            <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>r</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ok2</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>respI</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetResult</span><span style=color:#000;font-weight:700>().(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>xxx</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>YourResp</span><span style=color:#000;font-weight:700>);</span> <span style=color:#000>ok2</span> <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>r</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Msg</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>retryMsg</span> <span style=color:#000;font-weight:700>{</span>
              <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>true</span>
            <span style=color:#000;font-weight:700>}</span>
			<span style=color:#000;font-weight:700>}</span>
   <span style=color:#000;font-weight:700>}</span>
   <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span>
<span style=color:#000;font-weight:700>}</span>
<span style=color:#8f5902;font-style:italic>// retry with specify Error for one method
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>errorRetry</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ri</span> <span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RPCInfo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000;font-weight:700>{</span>
   <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>ri</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>To</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>Method</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;mock&#34;</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>te</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ok</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>errors</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Unwrap</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>).(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>remote</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TransError</span><span style=color:#000;font-weight:700>);</span> <span style=color:#000>ok</span> <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>te</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TypeID</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>100</span> <span style=color:#000;font-weight:700>{</span>
         <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>true</span>
      <span style=color:#000;font-weight:700>}</span>
   <span style=color:#000;font-weight:700>}</span>
   <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span>
<span style=color:#000;font-weight:700>}</span>
<span style=color:#8f5902;font-style:italic>// client option
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>yourResultRetry</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ShouldResultRetry</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>ErrorRetry</span><span style=color:#000;font-weight:700>:</span><span style=color:#000>errorRetry</span> <span style=color:#000;font-weight:700>,</span> <span style=color:#000>RespRetry</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>respRetry</span><span style=color:#000;font-weight:700>}</span>
<span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithSpecifiedResultRetry</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>yourResultRetry</span><span style=color:#000;font-weight:700>))</span>
</code></pre></div><p>In particular, for Thrift&rsquo;s Exception, although the rpc call layer returns an error, the internal processing of the framework is actually regarded as a one-time cost RPC request (because there is an actual return). If you want to judge it, you need to pay attention to two points:</p><ol><li>Judge by resp instead of error.</li><li>If the method retry is successful, namely, <code>GetSuccess() != nil</code>, you need to reset Exception to nil. Because the retry uses the XXXResult, and the Resp and Exception correspond to the two fields of XXXResult. Exception has been set for the first, and the second successfully set to Resp. However, the framework layer will not reset Exception, and the user needs to reset it by himself.</li></ol><p>e.g.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#000>respRetry</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>resp</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{},</span> <span style=color:#000>ri</span> <span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RPCInfo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>ri</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>To</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>Method</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;testException&#34;</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>teResult</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>resp</span><span style=color:#000;font-weight:700>.(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stability</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TestExceptionResult</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>teResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetSuccess</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
           <span style=color:#000>teResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetStException</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nil</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>teResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IsSetXXException</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>teResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>XxException</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Message</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>xxx</span> <span style=color:#000;font-weight:700>{</span>
           <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>true</span>
        <span style=color:#000;font-weight:700>}</span>
    <span style=color:#000;font-weight:700>}</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h4 id=backup-request-configuration>Backup Request Configuration</h4><ul><li>Retry Delay recommendations</li></ul><p>It is recommended to configure as TP99, then 1% request will trigger <code>Backup Request</code>.</p><ul><li>Configuration e.g.</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// If the first request is not returned after XXX ms, the backup request will be initiated and the `Chain Retry Stop` is enabled
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>bp</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewBackupPolicy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>xxx</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>xxxCli</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>xxxservice</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;targetService&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithBackupRequest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bp</span><span style=color:#000;font-weight:700>))</span>
</code></pre></div><ul><li>Strategy selection:</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#000>bp</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewBackupPolicy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>xxx</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic>// Number of retries. The default value is 1, excluding the first request.
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>bp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithMaxRetryTimes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>xxx</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic>// Disable `Chain Stop`
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>bp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DisableChainRetryStop</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#8f5902;font-style:italic>// Set errRate for retry circuit breaker
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>bp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRetryBreaker</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>errRate</span> <span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic>// Retry on the same node
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>bp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRetrySameNode</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div><h4 id=method-granularity-configuration-retry>Method Granularity Configuration Retry</h4><p>v0.4.0 is supported.</p><p>The sample configuration of 3.1.1, 3.1.2 will take effect for all methods. If you want to configure retry only for some methods, or configure on Failure Retry or BackupRequest for different methods respectively, configure as follows:</p><ul><li>Configuration e.g.</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// import &#34;github.com/cloudwego/kitex/pkg/retry&#34;
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>methodPolicies</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRetryMethodPolicies</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Policy</span><span style=color:#000;font-weight:700>{</span>
   <span style=color:#4e9a06>&#34;method1&#34;</span><span style=color:#000;font-weight:700>:</span>        <span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BuildFailurePolicy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewFailurePolicy</span><span style=color:#000;font-weight:700>()),</span>
   <span style=color:#4e9a06>&#34;method2&#34;</span><span style=color:#000;font-weight:700>:</span>       <span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BuildFailurePolicy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewFailurePolicyWithResultRetry</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>yourResultRetry</span><span style=color:#000;font-weight:700>))})</span>

<span style=color:#8f5902;font-style:italic>// other methods do backup request except above methods
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>otherMethodPolicy</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithBackupRequest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewBackupPolicy</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>))</span>
<span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span>
<span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>methodPolicies</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>otherMethodPolicy</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#000>xxxCli</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>xxxservice</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>targetService</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><blockquote><p>If both <code>WithFailureRetry</code> or <code>WithBackupRequest</code> are configured, methods not configured in <code>WithRetryMethodPolicies</code> will be executed according to the <code>WithFailureRetry</code> or <code>WithBackupRequest</code> policy. But <code>WithFailureRetry</code> and <code>WithBackupRequest</code> cannot be configured at the same time because they will take effect on all client methods.</p></blockquote><h4 id=request-level-configuration-retrycallopt>Request Level Configuration Retry（callopt）</h4><p>v0.4.0 is supported.</p><ul><li>Configuration e.g.</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
    <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/retry&#34;</span>
<span style=color:#000;font-weight:700>)</span>
<span style=color:#8f5902;font-style:italic>// demo1: call with failure retry policy, default retry error is Timeout
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>resp</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>cli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Mock</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>req</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>callopt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRetryPolicy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BuildFailurePolicy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewFailurePolicy</span><span style=color:#000;font-weight:700>())))</span>

<span style=color:#8f5902;font-style:italic>// demo2: call with customized failure retry policy
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>resp</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>cli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Mock</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>req</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>callopt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRetryPolicy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BuildFailurePolicy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span> <span style=color:#000>NewFailurePolicyWithResultRetry</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AllErrorRetry</span><span style=color:#000;font-weight:700>()))))</span>

<span style=color:#8f5902;font-style:italic>// demo3: call with backup request policy
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>bp</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewBackupPolicy</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>bp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithMaxRetryTimes</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>resp</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>cli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Mock</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>req</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>callopt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRetryPolicy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BuildBackupRequest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bp</span><span style=color:#000;font-weight:700>)))</span>
</code></pre></div><h3 id=circuit-breaker-reuse>Circuit Breaker Reuse</h3><p>When circuit breaker is enabled for a service, you can reuse the breaker&rsquo;s statistics to reduce additional CPU consumption. Note that the error rate threshold for retries must be lower than the threshold for a service.</p><ul><li>Configuration e.g.</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#8f5902;font-style:italic>// 1. Initialize kitex&#39;s built-in cbsuite
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>cbs</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>circuitbreak</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewCBSuite</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>circuitbreak</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RPCInfo2Key</span><span style=color:#000;font-weight:700>)</span><span style=color:#8f5902;font-style:italic>// 2. Initialize retryContainer, passing in ServiceControl and ServicePanel
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>retryC</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewRetryContainerWithCB</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>cbs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServiceControl</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>cs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>cbs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServicePanel</span><span style=color:#000;font-weight:700>())</span>

<span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span>
<span style=color:#8f5902;font-style:italic>// 3. Set retryContainer
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRetryContainer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retryC</span><span style=color:#000;font-weight:700>))</span>
<span style=color:#8f5902;font-style:italic>// 4. Set Service circuit breaker
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithMiddleware</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cbs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServiceCBMW</span><span style=color:#000;font-weight:700>()))</span>

<span style=color:#8f5902;font-style:italic>// 5. Initialize Client and pass in the configuration option
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>cli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>xxxservice</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>targetService</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><h3 id=dynamic-open-or-adjust-strategy>Dynamic open or adjust strategy</h3><p>If you want to adjust the policy in combination with remote configuration, dynamic open retry, or runtime, you can take effect through the <code>NotifyPolicyChange</code> method of <code>retryContainer</code>. Currently, the open source version of Kitex does not provide a remote configuration module, and users can integrate their own configuration center. Note: If it is turned on through code configuration, dynamic configuration cannot take effect.</p><ul><li>Configuration e.g.</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#000>retryC</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewRetryContainer</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#8f5902;font-style:italic>// demo
</span><span style=color:#8f5902;font-style:italic>// 1. define your change func
</span><span style=color:#8f5902;font-style:italic>// 2. exec yourChangeFunc in your config module
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>yourChangeFunc</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>oldData</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>newData</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>newConf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>newData</span><span style=color:#000;font-weight:700>.(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Policy</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>method</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>parseMethod</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>retryC</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NotifyPolicyChange</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>method</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>policy</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000;font-weight:700>}</span>


<span style=color:#8f5902;font-style:italic>// configure retryContainer
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>cli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>xxxservice</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>targetService</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithRetryContainer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>retryC</span><span style=color:#000;font-weight:700>))</span>
</code></pre></div><h2 id=tracking>Tracking</h2><p>Kitex records the retry times and previous request time in <code>rpcInfo</code>. You can report or output a retry request based on the <code>retry Tag</code> in Client&rsquo;s <code>metric</code> or log through:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>retryCount</span> <span style=color:#204a87;font-weight:700>string</span>
<span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>lastCosts</span> <span style=color:#204a87;font-weight:700>string</span>

<span style=color:#000>toInfo</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetRPCInfo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>To</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>retryTag</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ok</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>toInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Tag</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RetryTag</span><span style=color:#000;font-weight:700>);</span> <span style=color:#000>ok</span> <span style=color:#000;font-weight:700>{</span>
   <span style=color:#000>retryCount</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>retryTag</span>
   <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>lastCostTag</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ok</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>toInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Tag</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rpcinfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RetryLastCostTag</span><span style=color:#000;font-weight:700>);</span> <span style=color:#000>ok</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#000>lastCosts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>lastCostTag</span>
   <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=downstream-identification>Downstream identification</h2><p>If using <code>TTHeader</code> as the transport protocol, you can determine if the downstream <code>handler</code> is currently a retry request and decide whether to continue processing.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#000>retryReqCount</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>exist</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>metainfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetPersistentValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>retry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TransitKey</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>For example, <code>retryReqCount = 2</code>, which means the second retry request (excluding the first request), then the business degradation strategy can be adopted(non-retry requests do not have this information).</p><blockquote><p>Question: <code>Chain Stop</code> is enabled by default, is it necessary for services to identify retry requests?</p></blockquote><blockquote><p>Answer：<code>Chain Stop</code> means that the retry request on the chain will not be retried. Assuming that there is a request chain <code>A->B->C</code>, <code>A</code> sends a retry request to <code>B</code>, while during <code>B->C</code>, if a timeout occurs or <code>Backup</code> is configured, <code>B</code> will not send a retry request to <code>C</code>. If the service can identify the retry request, it can directly decide whether to continue the request to <code>C</code>.
In short, <code>Chain Stop</code> avoids retry amplification caused by <code>B</code> sending a retry request to <code>C</code>. The service&rsquo;s own control can completely avoid requests from <code>B</code> to <code>C</code>.</p></blockquote><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector('.feedback--answer-yes'),noButton=document.querySelector('.feedback--answer-no'),yesResponse=document.querySelector('.feedback--response-yes'),noResponse=document.querySelector('.feedback--response-no'),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=b=>{if(typeof ga!='function')return;const a={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:b};ga(a.command,a.hitType,a.category,a.action,a.label,a.value)};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(1)}),noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified
April 11, 2023
: <a href=https://github.com/cloudwego/cloudwego.github.io/commit/237eda3f3f9aaa78d070c6eb9b823760cd1285c2>chore: fix npm security issue (#600) (237eda3)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Lark aria-label=Lark><a class=text-white target=_blank rel=noopener href="https://applink.feishu.cn/client/chat/chatter/add_by_link?link_token=693v2544-2664-4421-b50f-7f1912p745r6" aria-label=Lark><img src=/webfonts/lark.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/CloudWeGo aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/cloudwego aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://join.slack.com/t/cloudwego/shared_invite/zt-tmcbzewn-UjXMF3ZQsPhl7W3tEDZboA aria-label=Slack><i class="fab fa-slack"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 The CloudWeGo Authors</small><p class="mt-2 text-white"><a class=cloudwego-link href=/about/ target=_blank rel=noopener>About</a>
|
<a class=cloudwego-link href=https://github.com/cloudwego/cloudwego.github.io/blob/main/LICENSE target=_blank rel=noopener>License</a></p></div></div></div></footer></div><script src=https://cdn.staticfile.org/popper.js/1.16.1/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.staticfile.org/bootstrap/4.6.0/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/js/main.min.cc7c4d018c27afc5b5c4e9ddd9f5b1fca60e2005312b12b5bec0518202c51314.js integrity="sha256-zHxNAYwnr8W1xOnd2fWx/KYOIAUxKxK1vsBRggLFExQ=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/outbound-link.js></script><script src=/js/navScroll.js></script></body></html>