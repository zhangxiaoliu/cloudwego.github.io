<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.85.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Code Generation Tool | CloudWeGo</title><meta name=description content="A leading practice for building enterprise cloud native middleware!"><meta property="og:title" content="Code Generation Tool"><meta property="og:description" content="kitex is a command line tool for code generation provided by the RPC framework Kitex. At present, kitex accepts both thrift and protobuf IDLs, and supports generating a skeleton of a server side project.
Installation  At present, the Kitex command-line tool does not support the Windows environment.
 Kitex code generation relies on thriftgo and protoc compilers. You need to install the corresponding compilers first: thriftgo or protoc.
After installing the aforementioned tools, you can install the Kitex command-line tool itself using the following go command:"><meta property="og:type" content="article"><meta property="og:url" content="https://www.cloudwego.io/docs/kitex/tutorials/code-gen/code_generation/"><meta property="article:section" content="docs"><meta property="article:published_time" content="2023-03-10T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-11T13:43:08+08:00"><meta property="og:site_name" content="CloudWeGo"><meta itemprop=name content="Code Generation Tool"><meta itemprop=description content="kitex is a command line tool for code generation provided by the RPC framework Kitex. At present, kitex accepts both thrift and protobuf IDLs, and supports generating a skeleton of a server side project.
Installation  At present, the Kitex command-line tool does not support the Windows environment.
 Kitex code generation relies on thriftgo and protoc compilers. You need to install the corresponding compilers first: thriftgo or protoc.
After installing the aforementioned tools, you can install the Kitex command-line tool itself using the following go command:"><meta itemprop=datePublished content="2023-03-10T00:00:00+00:00"><meta itemprop=dateModified content="2023-04-11T13:43:08+08:00"><meta itemprop=wordCount content="1831"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Code Generation Tool"><meta name=twitter:description content="kitex is a command line tool for code generation provided by the RPC framework Kitex. At present, kitex accepts both thrift and protobuf IDLs, and supports generating a skeleton of a server side project.
Installation  At present, the Kitex command-line tool does not support the Windows environment.
 Kitex code generation relies on thriftgo and protoc compilers. You need to install the corresponding compilers first: thriftgo or protoc.
After installing the aforementioned tools, you can install the Kitex command-line tool itself using the following go command:"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-QYWRQRLPRM')</script><script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?f1808c42af827f368aa7eca3baae6d55",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script><link rel=preload href=/scss/main.min.8090891c264e3fa6623cbdac7ce42c1259703e8068886edd79eb5ec5f88cd0c9.css as=style><link href=/scss/main.min.8090891c264e3fa6623cbdac7ce42c1259703e8068886edd79eb5ec5f88cd0c9.css rel=stylesheet integrity><script src=https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-QYWRQRLPRM','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand-xl navbar-dark td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img src=/img/logo.png></span></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0 ml-auto"><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Documentation</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/kitex/>Kitex</a>
<a class=dropdown-item href=/docs/hertz/>Hertz</a>
<a class=dropdown-item href=/docs/volo/>Volo</a>
<a class=dropdown-item href=/docs/netpoll/>Netpoll</a>
<a class=dropdown-item href=/docs/cwgo/>Cwgo</a>
<a class=dropdown-item href=/docs/motore/>Motore</a>
<a class=dropdown-item href=/docs/pilota/>Pilota</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cooperation/><span>Cooperation</span></a></li><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Security</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/security/safety-bulletin/>safety-bulletin</a>
<a class=dropdown-item href=/security/vulnerability-reporting/>vulnerability-reporting</a></div></li><li class="nav-item dropdown mr-4"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/kitex/tutorials/code-gen/code_generation/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.ffbc4e552f7e4427acd2c28307a2610a.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.ffbc4e552f7e4427acd2c28307a2610a.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/kitex/tutorials/code-gen/code_generation/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitex-li><input type=checkbox id=m-docskitex-check checked>
<label for=m-docskitex-check><a href=/docs/kitex/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitex><span>Kitex</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexoverview-li><input type=checkbox id=m-docskitexoverview-check checked>
<label for=m-docskitexoverview-check><a href=/docs/kitex/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexoverview><span>Overview</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexgetting-started-li><input type=checkbox id=m-docskitexgetting-started-check checked>
<label for=m-docskitexgetting-started-check><a href=/docs/kitex/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexgetting-started><span>Getting Started</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitextutorials-li><input type=checkbox id=m-docskitextutorials-check checked>
<label for=m-docskitextutorials-check><a href=/docs/kitex/tutorials/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorials><span>Tutorials</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsbasic-feature-li><input type=checkbox id=m-docskitextutorialsbasic-feature-check>
<label for=m-docskitextutorialsbasic-feature-check><a href=/docs/kitex/tutorials/basic-feature/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsbasic-feature><span>Basic Feature</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuremessage_type-li><input type=checkbox id=m-docskitextutorialsbasic-featuremessage_type-check>
<label for=m-docskitextutorialsbasic-featuremessage_type-check><a href=/docs/kitex/tutorials/basic-feature/message_type/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuremessage_type><span>Message Types</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureserialization_protocol-li><input type=checkbox id=m-docskitextutorialsbasic-featureserialization_protocol-check>
<label for=m-docskitextutorialsbasic-featureserialization_protocol-check><a href=/docs/kitex/tutorials/basic-feature/serialization_protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureserialization_protocol><span>Serialization Protocol</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuretransport_protocol-li><input type=checkbox id=m-docskitextutorialsbasic-featuretransport_protocol-check>
<label for=m-docskitextutorialsbasic-featuretransport_protocol-check><a href=/docs/kitex/tutorials/basic-feature/transport_protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuretransport_protocol><span>Transport Protocol</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurevisit_directly-li><input type=checkbox id=m-docskitextutorialsbasic-featurevisit_directly-check>
<label for=m-docskitextutorialsbasic-featurevisit_directly-check><a href=/docs/kitex/tutorials/basic-feature/visit_directly/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurevisit_directly><span>Visit Directly</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureconnection_type-li><input type=checkbox id=m-docskitextutorialsbasic-featureconnection_type-check>
<label for=m-docskitextutorialsbasic-featureconnection_type-check><a href=/docs/kitex/tutorials/basic-feature/connection_type/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureconnection_type><span>Connection Type</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuretimeout-li><input type=checkbox id=m-docskitextutorialsbasic-featuretimeout-check>
<label for=m-docskitextutorialsbasic-featuretimeout-check><a href=/docs/kitex/tutorials/basic-feature/timeout/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuretimeout><span>Timeouts</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureretry-li><input type=checkbox id=m-docskitextutorialsbasic-featureretry-check>
<label for=m-docskitextutorialsbasic-featureretry-check><a href=/docs/kitex/tutorials/basic-feature/retry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureretry><span>Retry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureloadbalance-li><input type=checkbox id=m-docskitextutorialsbasic-featureloadbalance-check>
<label for=m-docskitextutorialsbasic-featureloadbalance-check><a href=/docs/kitex/tutorials/basic-feature/loadbalance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureloadbalance><span>LoadBalancer</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurecircuitbreaker-li><input type=checkbox id=m-docskitextutorialsbasic-featurecircuitbreaker-check>
<label for=m-docskitextutorialsbasic-featurecircuitbreaker-check><a href=/docs/kitex/tutorials/basic-feature/circuitbreaker/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurecircuitbreaker><span>Circuit Breaker</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurelimiting-li><input type=checkbox id=m-docskitextutorialsbasic-featurelimiting-check>
<label for=m-docskitextutorialsbasic-featurelimiting-check><a href=/docs/kitex/tutorials/basic-feature/limiting/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurelimiting><span>Rate Limiting</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurefallback-li><input type=checkbox id=m-docskitextutorialsbasic-featurefallback-check>
<label for=m-docskitextutorialsbasic-featurefallback-check><a href=/docs/kitex/tutorials/basic-feature/fallback/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurefallback><span>Fallback</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuretracing-li><input type=checkbox id=m-docskitextutorialsbasic-featuretracing-check>
<label for=m-docskitextutorialsbasic-featuretracing-check><a href=/docs/kitex/tutorials/basic-feature/tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuretracing><span>Instrumentation Control</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurelogging-li><input type=checkbox id=m-docskitextutorialsbasic-featurelogging-check>
<label for=m-docskitextutorialsbasic-featurelogging-check><a href=/docs/kitex/tutorials/basic-feature/logging/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurelogging><span>Logging</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurebizstatuserr-li><input type=checkbox id=m-docskitextutorialsbasic-featurebizstatuserr-check>
<label for=m-docskitextutorialsbasic-featurebizstatuserr-check><a href=/docs/kitex/tutorials/basic-feature/bizstatuserr/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurebizstatuserr><span>Business Exception</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsservice-governance-li><input type=checkbox id=m-docskitextutorialsservice-governance-check>
<label for=m-docskitextutorialsservice-governance-check><a href=/docs/kitex/tutorials/service-governance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsservice-governance><span>Service Governance</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancediscovery-li><input type=checkbox id=m-docskitextutorialsservice-governancediscovery-check>
<label for=m-docskitextutorialsservice-governancediscovery-check><a href=/docs/kitex/tutorials/service-governance/discovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancediscovery><span>Service Discovery</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancemonitoring-li><input type=checkbox id=m-docskitextutorialsservice-governancemonitoring-check>
<label for=m-docskitextutorialsservice-governancemonitoring-check><a href=/docs/kitex/tutorials/service-governance/monitoring/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancemonitoring><span>Monitoring</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancetracing-li><input type=checkbox id=m-docskitextutorialsservice-governancetracing-check>
<label for=m-docskitextutorialsservice-governancetracing-check><a href=/docs/kitex/tutorials/service-governance/tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancetracing><span>Tracing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governanceaccess_control-li><input type=checkbox id=m-docskitextutorialsservice-governanceaccess_control-check>
<label for=m-docskitextutorialsservice-governanceaccess_control-check><a href=/docs/kitex/tutorials/service-governance/access_control/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governanceaccess_control><span>Customized Access Control</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsadvanced-feature-li><input type=checkbox id=m-docskitextutorialsadvanced-feature-check>
<label for=m-docskitextutorialsadvanced-feature-check><a href=/docs/kitex/tutorials/advanced-feature/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsadvanced-feature><span>Advanced Feature</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsadvanced-featuregeneric-call-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregeneric-call-check>
<label for=m-docskitextutorialsadvanced-featuregeneric-call-check><a href=/docs/kitex/tutorials/advanced-feature/generic-call/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsadvanced-featuregeneric-call><span>Generic Call</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards-check>
<label for=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards-check><a href=/docs/kitex/tutorials/advanced-feature/generic-call/thrift_idl_annotation_standards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards><span>IDL Definition Specification for Mapping between Thrift and HTTP</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuremetainfo-li><input type=checkbox id=m-docskitextutorialsadvanced-featuremetainfo-check>
<label for=m-docskitextutorialsadvanced-featuremetainfo-check><a href=/docs/kitex/tutorials/advanced-feature/metainfo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuremetainfo><span>Metainfo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featureinvoker-li><input type=checkbox id=m-docskitextutorialsadvanced-featureinvoker-check>
<label for=m-docskitextutorialsadvanced-featureinvoker-check><a href=/docs/kitex/tutorials/advanced-feature/invoker/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featureinvoker><span>Server SDK Mode</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featureerror_handler-li><input type=checkbox id=m-docskitextutorialsadvanced-featureerror_handler-check>
<label for=m-docskitextutorialsadvanced-featureerror_handler-check><a href=/docs/kitex/tutorials/advanced-feature/error_handler/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featureerror_handler><span>Customize Error Handler</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurestart_shutdown_hook-li><input type=checkbox id=m-docskitextutorialsadvanced-featurestart_shutdown_hook-check>
<label for=m-docskitextutorialsadvanced-featurestart_shutdown_hook-check><a href=/docs/kitex/tutorials/advanced-feature/start_shutdown_hook/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurestart_shutdown_hook><span>Customize Hook for Start/Shutdown of Server-side</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuregrpcproxy-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregrpcproxy-check>
<label for=m-docskitextutorialsadvanced-featuregrpcproxy-check><a href=/docs/kitex/tutorials/advanced-feature/grpcproxy/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregrpcproxy><span>gRPC Proxy</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurecodec_frugal-li><input type=checkbox id=m-docskitextutorialsadvanced-featurecodec_frugal-check>
<label for=m-docskitextutorialsadvanced-featurecodec_frugal-check><a href=/docs/kitex/tutorials/advanced-feature/codec_frugal/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurecodec_frugal><span>Frugal</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurexds-li><input type=checkbox id=m-docskitextutorialsadvanced-featurexds-check>
<label for=m-docskitextutorialsadvanced-featurexds-check><a href=/docs/kitex/tutorials/advanced-feature/xds/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurexds><span>xDS Support</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featureprofiler-li><input type=checkbox id=m-docskitextutorialsadvanced-featureprofiler-check>
<label for=m-docskitextutorialsadvanced-featureprofiler-check><a href=/docs/kitex/tutorials/advanced-feature/profiler/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featureprofiler><span>Request Profiler</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitextutorialscode-gen-li><input type=checkbox id=m-docskitextutorialscode-gen-check checked>
<label for=m-docskitextutorialscode-gen-check><a href=/docs/kitex/tutorials/code-gen/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialscode-gen><span>Code Generation</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docskitextutorialscode-gencode_generation-li><input type=checkbox id=m-docskitextutorialscode-gencode_generation-check checked>
<label for=m-docskitextutorialscode-gencode_generation-check><a href=/docs/kitex/tutorials/code-gen/code_generation/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencode_generation><span class=td-sidebar-nav-active-item>Code Generation Tool</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gencombine_service-li><input type=checkbox id=m-docskitextutorialscode-gencombine_service-check>
<label for=m-docskitextutorialscode-gencombine_service-check><a href=/docs/kitex/tutorials/code-gen/combine_service/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencombine_service><span>Combine Service</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genvalidator-li><input type=checkbox id=m-docskitextutorialscode-genvalidator-check>
<label for=m-docskitextutorialscode-genvalidator-check><a href=/docs/kitex/tutorials/code-gen/validator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genvalidator><span>Thrift Validator</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genfastpb-li><input type=checkbox id=m-docskitextutorialscode-genfastpb-check>
<label for=m-docskitextutorialscode-genfastpb-check><a href=/docs/kitex/tutorials/code-gen/fastpb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genfastpb><span>Fastpb</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gentemplate_extension-li><input type=checkbox id=m-docskitextutorialscode-gentemplate_extension-check>
<label for=m-docskitextutorialscode-gentemplate_extension-check><a href=/docs/kitex/tutorials/code-gen/template_extension/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gentemplate_extension><span>Extend the Templates of Service Generated Code</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genstruct_reference_generator-li><input type=checkbox id=m-docskitextutorialscode-genstruct_reference_generator-check>
<label for=m-docskitextutorialscode-genstruct_reference_generator-check><a href=/docs/kitex/tutorials/code-gen/struct_reference_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genstruct_reference_generator><span>Generate Structs Reference</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gencustom_tpl-li><input type=checkbox id=m-docskitextutorialscode-gencustom_tpl-check>
<label for=m-docskitextutorialscode-gencustom_tpl-check><a href=/docs/kitex/tutorials/code-gen/custom_tpl/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencustom_tpl><span>Custom Scaffold Template</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsframework-exten-li><input type=checkbox id=m-docskitextutorialsframework-exten-check>
<label for=m-docskitextutorialsframework-exten-check><a href=/docs/kitex/tutorials/framework-exten/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsframework-exten><span>Framework Extension</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenmiddleware-li><input type=checkbox id=m-docskitextutorialsframework-extenmiddleware-check>
<label for=m-docskitextutorialsframework-extenmiddleware-check><a href=/docs/kitex/tutorials/framework-exten/middleware/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenmiddleware><span>Middleware Extensions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extensuite-li><input type=checkbox id=m-docskitextutorialsframework-extensuite-check>
<label for=m-docskitextutorialsframework-extensuite-check><a href=/docs/kitex/tutorials/framework-exten/suite/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extensuite><span>Suite Extensions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenregistry-li><input type=checkbox id=m-docskitextutorialsframework-extenregistry-check>
<label for=m-docskitextutorialsframework-extenregistry-check><a href=/docs/kitex/tutorials/framework-exten/registry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenregistry><span>Extension of Service Registry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenservice_discovery-li><input type=checkbox id=m-docskitextutorialsframework-extenservice_discovery-check>
<label for=m-docskitextutorialsframework-extenservice_discovery-check><a href=/docs/kitex/tutorials/framework-exten/service_discovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenservice_discovery><span>Service Discovery Extension</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenloadbalance-li><input type=checkbox id=m-docskitextutorialsframework-extenloadbalance-check>
<label for=m-docskitextutorialsframework-extenloadbalance-check><a href=/docs/kitex/tutorials/framework-exten/loadbalance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenloadbalance><span>Customize LoadBalancer</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenmonitoring-li><input type=checkbox id=m-docskitextutorialsframework-extenmonitoring-check>
<label for=m-docskitextutorialsframework-extenmonitoring-check><a href=/docs/kitex/tutorials/framework-exten/monitoring/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenmonitoring><span>Monitoring Extension</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extencodec-li><input type=checkbox id=m-docskitextutorialsframework-extencodec-check>
<label for=m-docskitextutorialsframework-extencodec-check><a href=/docs/kitex/tutorials/framework-exten/codec/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extencodec><span>Extension of Codec</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentransport-li><input type=checkbox id=m-docskitextutorialsframework-extentransport-check>
<label for=m-docskitextutorialsframework-extentransport-check><a href=/docs/kitex/tutorials/framework-exten/transport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentransport><span>Extension of Transport Module</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentransmeta-li><input type=checkbox id=m-docskitextutorialsframework-extentransmeta-check>
<label for=m-docskitextutorialsframework-extentransmeta-check><a href=/docs/kitex/tutorials/framework-exten/transmeta/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentransmeta><span>Extension of Metadata Transparent Transmission</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentrans_pipeline-li><input type=checkbox id=m-docskitextutorialsframework-extentrans_pipeline-check>
<label for=m-docskitextutorialsframework-extentrans_pipeline-check><a href=/docs/kitex/tutorials/framework-exten/trans_pipeline/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentrans_pipeline><span>Extension of Transport Pipeline-Bound</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extendiagnosis-li><input type=checkbox id=m-docskitextutorialsframework-extendiagnosis-check>
<label for=m-docskitextutorialsframework-extendiagnosis-check><a href=/docs/kitex/tutorials/framework-exten/diagnosis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extendiagnosis><span>Extension of Diagnosis</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsoptions-li><input type=checkbox id=m-docskitextutorialsoptions-check>
<label for=m-docskitextutorialsoptions-check><a href=/docs/kitex/tutorials/options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsoptions><span>Option</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsoptionsclient_options-li><input type=checkbox id=m-docskitextutorialsoptionsclient_options-check>
<label for=m-docskitextutorialsoptionsclient_options-check><a href=/docs/kitex/tutorials/options/client_options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionsclient_options><span>Client Option</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsoptionsserver_options-li><input type=checkbox id=m-docskitextutorialsoptionsserver_options-check>
<label for=m-docskitextutorialsoptionsserver_options-check><a href=/docs/kitex/tutorials/options/server_options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionsserver_options><span>Server Option</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsoptionscall_options-li><input type=checkbox id=m-docskitextutorialsoptionscall_options-check>
<label for=m-docskitextutorialsoptionscall_options-check><a href=/docs/kitex/tutorials/options/call_options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionscall_options><span>Call Option</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitexreference-li><input type=checkbox id=m-docskitexreference-check checked>
<label for=m-docskitexreference-check><a href=/docs/kitex/reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexreference><span>Reference</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferencetransport_protocol_ttheader-li><input type=checkbox id=m-docskitexreferencetransport_protocol_ttheader-check>
<label for=m-docskitexreferencetransport_protocol_ttheader-check><a href=/docs/kitex/reference/transport_protocol_ttheader/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferencetransport_protocol_ttheader><span>TTHeader</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferenceexception-li><input type=checkbox id=m-docskitexreferenceexception-check>
<label for=m-docskitexreferenceexception-check><a href=/docs/kitex/reference/exception/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferenceexception><span>Exception Instruction</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferenceversion-li><input type=checkbox id=m-docskitexreferenceversion-check>
<label for=m-docskitexreferenceversion-check><a href=/docs/kitex/reference/version/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferenceversion><span>Version Specification</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexfaq-li><input type=checkbox id=m-docskitexfaq-check checked>
<label for=m-docskitexfaq-check><a href=/docs/kitex/faq/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexfaq><span>FAQ</span></a></label></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cloudwego/cloudwego.github.io/edit/main/content/en/docs/kitex/Tutorials/code-gen/code_generation.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/new/main/content/en/docs/kitex/Tutorials/code-gen/code_generation.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/issues/new?title=Code%20Generation%20Tool" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cloudwego/kitex/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#installation>Installation</a></li><li><a href=#generate-code>Generate Code</a><ul><li><a href=#generate-code-with-scaffolding>Generate Code with Scaffolding</a></li><li><a href=#library-dependencies>Library Dependencies</a></li><li><a href=#notes-for-using-protobuf-idls>Notes for Using Protobuf IDLs</a></li><li><a href=#options>Options</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/kitex/>Kitex</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/kitex/tutorials/>Tutorials</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/kitex/tutorials/code-gen/>Code Generation</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://www.cloudwego.io/docs/kitex/tutorials/code-gen/code_generation/>Code Generation Tool</a></li></ol></nav><div class=td-content><h1>Code Generation Tool</h1><header class=article-meta></header><p><strong>kitex</strong> is a command line tool for code generation provided by the RPC framework <strong>Kitex</strong>. At present, kitex accepts both thrift and protobuf IDLs, and supports generating a skeleton of a server side project.</p><h2 id=installation>Installation</h2><blockquote><p>At present, the Kitex command-line tool does not support the Windows environment.</p></blockquote><p>Kitex code generation relies on thriftgo and protoc compilers. You need to install the corresponding compilers first: <a href=https://github.com/cloudwego/thriftgo>thriftgo</a> or <a href=https://github.com/protocolbuffers/protobuf/releases>protoc</a>.</p><p>After installing the aforementioned tools, you can install the Kitex command-line tool itself using the following go command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>go install github.com/cloudwego/kitex/tool/cmd/kitex@latest
</code></pre></div><p>Alternatively, you can download the Kitex source code and navigate to the <code>tool/cmd/kitex</code> directory. From there, you can execute <code>go install</code> to install the Kitex command-line tool:</p><p>After installation, you can check the version of the tool by executing <code>kitex -version</code> or view the usage help by executing <code>kitex -help</code>.</p><h2 id=generate-code>Generate Code</h2><p>Generating code involves two parts: one is the serialization and deserialization code for struct, which is generated by the underlying compilers, thriftgo or protoc. The other part is the stub code used for creating and initiating RPC calls, which is built on the top of the former by the Kitex tool. Users only need to run the Kitex code generation tool, and all the code generation process will be automatically completed by the underlying tools.</p><p>The syntax for generating code with the Kitex tool is <code>kitex [options] xx.thrift/xxx.proto</code>. For information about the usage of options, please refer to the end of this document.</p><p>Taking the thrift scenario as an example, there are two IDL files as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-thrift data-lang=thrift><span style=color:#8f5902;font-style:italic>// File1：example.thrift
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>go</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>test</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>include</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;base.thrift&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>MyReq</span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#204a87;font-weight:700>required</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>input</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#204a87;font-weight:700>required</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>base.BaseReq</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>baseReq</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>service</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>MyService</span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Hello</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#204a87;font-weight:700>required</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>MyReq</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>req</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// File2：base.thrift
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BaseReq</span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#204a87;font-weight:700>required</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>name</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><p>If the current directory is under Go Path, execute the following command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kitex example.thrift
</code></pre></div><p>If an error message <code>Outside of $GOPATH. Please specify a module name with the '-module' flag.</code> is displayed, it means that the current directory is not under Go Path, and a new go mod needs to be created. Use the <code>-module</code> flag to specify the go mod and execute the following command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kitex -module xxx example.thrift
</code></pre></div><p>After execution, a directory named kitex_gen will be generated in the current directory with the following contents:</p><pre><code>kitex_gen/
├── base					// The generated content of base.thrift, using lowercase IDL file name as the package name when there is no 'go namespace'
│   ├── base.go				// Go code generated by thriftgo, containing the definitions from base.thrift
│   ├── k-base.go			// Generated by Kitex and includes additional serialization optimization implementations provided by Kitex
│   └── k-consts.go			// Avoiding placeholder files for 'import not used'
└── test					// The generated content of example.thrift, use go namespace as package name
    ├── example.go			// The Go code generated by Thriftgo, which includes the content defined in example.thrift
    ├── k-consts.go			// Placeholder file to avoid 'import not used'
    ├── k-example.go		// Generated by Kitex, which includes additional serialization optimization implementations provided by Kitex
    └── myservice			// The code generated by kitex for the myservice defined in example.thrift
        ├── client.go		// Provide NewClient API
        ├── invoker.go		// Provide API in the form of a Server SDK.
        ├── myservice.go	// Provide some definitions that are shared by both client.go and server.go
        └── server.go		// Provide NewServer API
</code></pre><h3 id=generate-code-with-scaffolding>Generate Code with Scaffolding</h3><p>The code example mentioned earlier cannot be directly executed and requires building NewClient and NewServer on your own. The kitex command-line tool provides the <code>-service</code> parameter to generate scaffolded code directly. Execute the following command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kitex -service mydemoservice demo.thrift 
</code></pre></div><p>The generated results are as follows:</p><pre><code>├── build.sh			// Script for quickly building services
├── handler.go		    // Generate a handler scaffold for the server
├── kitex_info.yaml  	// Record meta information for integration with cwgo tools
├── main.go		 	 // Quickly start the main function of the server
└── script			 // Build service related scripts
│    └── bootstrap.sh
├── kitex_gen
     └── ....	 
    
</code></pre><p>After filling in the business code in the generated function of <code>handler. go</code>, execute the main function of <code>main. go</code> to quickly start the Kitex Server.</p><h3 id=library-dependencies>Library Dependencies</h3><p>The codes generated by kitex may depends on certain Go libraries:</p><ul><li>For thrift IDLs, it is <code>github.com/apache/thrift v0.13.0</code></li><li>For protobuf IDLs, it is <code>google.golang.org/protobuf v1.26.0</code></li></ul><p>It is important to note that, from <code>v0.14.0</code>, the APIs in <code>github.com/apache/thrift/lib/go/thrift</code> are <strong>incompatible</strong> with previous versions. If you specify the <code>-u</code> flag when using <code>go get</code> to update dependencies, this library will be updated to the incompatible version and cause compilation failure. Usually, there are errors like this:
Like &lsquo;not enough arguments in call to iprot.ReadStructBegin&rsquo;</p><p>You can solve this problem by executing an extra command to choose the appropriate version:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>go get github.com/apache/thrift@v0.13.0
</code></pre></div><p>or force the version with a <code>replace</code> command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>go mod edit -replace github.com/apache/thrift<span style=color:#ce5c00;font-weight:700>=</span>github.com/apache/thrift@v0.13.0
</code></pre></div><p>After v0.4.5, the tool will automatically add this constraint to go mod.</p><h3 id=notes-for-using-protobuf-idls>Notes for Using Protobuf IDLs</h3><p>The kitex only supports the <a href=https://developers.google.com/protocol-buffers/docs/proto3>proto3</a> version of the protocol buffers language.</p><p>The <code>go_package</code> option in the IDL is required. Its value is a package name sequence separated by dots (<code>.</code>) or by slashes (<code>/</code>). It determines the suffix of the result import path. For instance,</p><pre><code>option go_package = &quot;hello.world&quot;; // or hello/world
</code></pre><p>will generates an import path <code>${imoprt path of the current directory}/kitex_gen/hello/world</code>.</p><p>If you assign a complete import path to <code>go_package</code>, then kitex will generate codes for this IDL only when the import path matches the kitex_gen directory. For example:</p><ul><li><code>go_package="${import path of current module}/kitex_gen/hello/world";</code>: OK. Kitex will generate codes for this IDL;</li><li><code>go_package="${import path of current module}/hello/world";</code>: Kitex will not generate codes for this IDL;</li><li><code>go_package="any.other.domain/some/module/kitex_gen/hello/world";</code>: Kitex will not generate codes for this IDL;</li></ul><p>You can overwrite the <code>go_package</code> value in a proto file with a command line option <code>--protobuf Msome.proto=your.package.name/kitex_gen/wherever/you/like</code>. For the usage of the option, please refer to the <a href=https://developers.google.com/protocol-buffers/docs/reference/go-generated#package>official document</a> of Protocol Buffers.</p><h3 id=options>Options</h3><p>The option description here may be outdated. Run <code>kitex -h</code> or <code>kitex --help</code> to get all usable options of kitex.</p><h4 id=-service-service_name><code>-service service_name</code></h4><p>When this option is specified, kitex will generate a scaffold to build a server. Parameter <code>service_name</code> gives the name of the server itself when launched. Its value is usually up to the service registry and service disccovery components when using the Kitex framework.</p><h4 id=-module-module_name><code>-module module_name</code></h4><p>This option is used to specify the Go module the generated codes belongs to. It affects import paths.</p><ol><li><p>If the current directory is a child path of <code>$GOPATH/src</code>, this option can be omitted; kitex will use a path relative to <code>$GOPATH/src</code> as the prefix of import path in generated codes. For example, if you run kitex under <code>$GOPATH/src/example.com/hello/world</code>, the import path of <code>kitex_gen/example_package/example_package.go</code> for other package will be <code>example.com/hello/world/kitex_gen/example_package</code>.</p></li><li><p>If the current directory is not a child path of <code>$GOPATH/src</code>, this option must be specified.</p></li><li><p>If <code>-module</code> is specified, then kitex searches for go.mod from the current directory to the root.</p><ul><li>If go.mod is not found, kitex will generated one with <code>go mod init</code>.</li><li>If go.mod is found, then kitex will check if the module name in go.mod is identical with the argument of <code>-module</code>; if they diffs, kitex will report an error and exit.</li><li>Finally, the position of go.mod and its module names determines the import path in generated codes.</li></ul></li></ol><h4 id=-i-path><code>-I path</code></h4><p>Add a search path for IDL. Support adding multiple files. When searching for IDL (including other files included in IDL), it will search in the order of the added path.</p><p>Path input can also support git pull. When the current suffix is git @, http://, https://, the remote git repository will be pulled to the local location and included in the search path. The usage method is as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kitex -module xx -I xxx.git abc/xxx.thrift 
</code></pre></div><p>Or use <code>@ xxx</code> to specify branch pull:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kitex -module xx -I xxx.git@branch abc/xxx.thrift 

</code></pre></div><p>During execution, the git repository will be pulled first and stored in~/. kitex/cache/xxx/xxx/ xxx@branch Directory, then search for abc/xxx.thrift in this directory and generate code</p><h4 id=-v-or--verbose><code>-v</code> or <code>-verbose</code></h4><p>Output more logs.</p><h4 id=-use-path><code>-use path</code></h4><p>When generating server codes (with <code>-service</code>), the <code>-use</code> option stops kitex from generating the kitex_gen and uses the import path given by the argument instead.</p><h4 id=-combine-service><code>-combine-service</code></h4><p>For thrift IDLs, when generating codes for a server, kitex only generates methods for the last service definition in the IDL. If there are multiple services in the IDL and you want to export all their abilities, the <code>-combine-service</code> option is for that.</p><p>This option creates a <code>CombineService</code> that assembles all methods of services in the target IDL and uses it in the main package. Notice that no two methods of services can have the same name.</p><h4 id=-protobuf-value><code>-protobuf value</code></h4><p>Pass an argument to protoc. The argument will be appended to the <code>-go_out</code> for protoc. See the documentation of protoc for available values.</p><h4 id=-thrift-value><code>-thrift value</code></h4><p>Pass an argument to thriftgo. The argument will be appended to the <code>-g go:</code> for thriftgo. See the documentation of thriftgo for available values.</p><p>Kitex by default passes <code>naming_style=golint,ignore_initialisms,gen_setter,gen_deep_equal</code> to thriftgo and it can be overridden if you specify the same parameter in addition.</p><h4 id=-record><code>-record</code></h4><p>In some scenarios, it may be necessary to run the Kitex command multiple times to generate code for multiple IDLs. <code>-record</code> parameter is used to automatically record each Kitex command executed and generate a script file for batch re execution during updates.</p><p>Usage:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kitex -module xxx -service xxx -record xxx.thrift
</code></pre></div><p>After executing with the - record parameter, generate the kitex-all.sh file in the execution directory and record the current command
If the - record parameter is used multiple times, it will be recorded multiple times
The content of kitex-all.sh is as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>
<span style=color:#8f5902;font-style:italic>#!/bin/bash</span>

kitex -module xxx -service xxx xxx.thrift
kitex -module xxx xxxa.thrift
kitex -module xxx xxxb.thrift
kitex -module xxx xxxc.thrift
kitex -module xxx xxxd.thrift

....Continue Recording newly executed commands

</code></pre></div><p>Command records are not always appended backwards, as follows:</p><ul><li>Only one command with - service will be recorded</li><li>If the idl path of the recorded command is new, append the record at the end</li><li>If the idl path already exists, overwrite the original record</li></ul><p>To regenerate the code, execute kitex-all.sh. If you want to manually adjust, simply open the script file and edit the command directly</p><h4 id=-gen-path><code>-gen-path</code></h4><blockquote><p>Currently, it only takes effect in the Thrift scenario, and the protobuf side needs to be further improved and implemented.</p></blockquote><p>Default scenario, kitex will generate code in kitex_ Under the gen directory, adjustments can be made through - gen path</p><h4 id=-protobuf-plugin><code>-protobuf-plugin</code></h4><p>Plugins that support extending protocs can be integrated into a rich protoc plugin ecosystem, providing convenience for expanding code generation</p><p>The usage method is as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kitex -protobuf-plugin <span style=color:#ce5c00;font-weight:700>{</span>plugin_name:options:out_dir<span style=color:#ce5c00;font-weight:700>}</span> idl/myservice.proto
</code></pre></div><p>Among them:</p><ul><li>plugin_name: Indicates the name of the plugin to be executed; For example, &lsquo;protoc gen go&rsquo;, then its plugin name is &lsquo;go&rsquo;</li><li>options: Represents the options passed to the plugin; Usually, some information such as &lsquo;go module&rsquo; is passed on</li><li>out_dir: Represents the path where the plugin generates code; If there are no special needs, it is generally specified as &ldquo;.&rdquo;</li></ul><p>The above three options can be mapped to the following protoc commands, which can be automatically concatenated and executed by kitex:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>protoc
    --<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#000>$plugin_name</span><span style=color:#ce5c00;font-weight:700>}</span><span style=color:#000>_out</span><span style=color:#ce5c00;font-weight:700>={</span><span style=color:#000>$out_dir</span><span style=color:#ce5c00;font-weight:700>}</span>
    --<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#000>$plugin_name</span><span style=color:#ce5c00;font-weight:700>}</span><span style=color:#000>_opt</span><span style=color:#ce5c00;font-weight:700>={</span><span style=color:#000>$options</span><span style=color:#ce5c00;font-weight:700>}</span>        
    idl/myservice.proto
</code></pre></div><p>For example, if you want to use <a href=https://github.com/cloudwego/protoc-gen-validator>protoc-gen-validator</a> plugin, you can execute the following command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kitex 
    -protobuf-plugin<span style=color:#ce5c00;font-weight:700>=</span>validator:module<span style=color:#ce5c00;font-weight:700>=</span>toutiao/middleware/kitex,recurse<span style=color:#ce5c00;font-weight:700>=</span>true:.
    idl/myservice.proto
</code></pre></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector('.feedback--answer-yes'),noButton=document.querySelector('.feedback--answer-no'),yesResponse=document.querySelector('.feedback--response-yes'),noResponse=document.querySelector('.feedback--response-no'),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=b=>{if(typeof ga!='function')return;const a={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:b};ga(a.command,a.hitType,a.category,a.action,a.label,a.value)};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(1)}),noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified
April 11, 2023
: <a href=https://github.com/cloudwego/cloudwego.github.io/commit/237eda3f3f9aaa78d070c6eb9b823760cd1285c2>chore: fix npm security issue (#600) (237eda3)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Lark aria-label=Lark><a class=text-white target=_blank rel=noopener href="https://applink.feishu.cn/client/chat/chatter/add_by_link?link_token=693v2544-2664-4421-b50f-7f1912p745r6" aria-label=Lark><img src=/webfonts/lark.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/CloudWeGo aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/cloudwego aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://join.slack.com/t/cloudwego/shared_invite/zt-tmcbzewn-UjXMF3ZQsPhl7W3tEDZboA aria-label=Slack><i class="fab fa-slack"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 The CloudWeGo Authors</small><p class="mt-2 text-white"><a class=cloudwego-link href=/about/ target=_blank rel=noopener>About</a>
|
<a class=cloudwego-link href=https://github.com/cloudwego/cloudwego.github.io/blob/main/LICENSE target=_blank rel=noopener>License</a></p></div></div></div></footer></div><script src=https://cdn.staticfile.org/popper.js/1.16.1/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.staticfile.org/bootstrap/4.6.0/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/js/main.min.cc7c4d018c27afc5b5c4e9ddd9f5b1fca60e2005312b12b5bec0518202c51314.js integrity="sha256-zHxNAYwnr8W1xOnd2fWx/KYOIAUxKxK1vsBRggLFExQ=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/outbound-link.js></script><script src=/js/navScroll.js></script></body></html>